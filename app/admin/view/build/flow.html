<link href="__PUBLIC__/js/flow/jquery-ui-1.9.0.custom.css" rel="stylesheet" />      
<style>
	.tool-btns {float:right;}
    .flows {position:relative;}
    /* 两列左侧自适应布局 */
	.flows .container{margin:0 0 10px;}
	.flows .attrs{position:relative;float:right;width:300px;margin-left:-300px}
	.flows .main{float:left;width:100%;;}
	.flows .flow{margin-right:310px;position:relative;border-right: solid 1px #e0e0e0;}
	#myPalette{background:#F4F6FC;height:60px;line-height:20px;overflow:hidden;margin:5px;display: none;}
	#myDiagram{height: 720px;background:#fdfdfd;}
	canvas{outline:0;}

	.attrs .layui-form-label{float:none;text-align:left;font-weight:700;padding-left:0;}
	.attrs .layui-input-block{margin-left:0;}
	.flowNav{position: absolute;width: 200px;top:10px;right: 10px;z-index: 300;box-shadow: 0 0 6px rgba(51,51,51,.2);background-color: #fff;padding: 5px 15px 15px;}
	.chart-nav {font-size: 12px;line-height: 20px;}
	#myOverviewDiv{margin-top:5px;background-color: aliceblue;border:1px solid #0DB3A6;width:200px;height:85px;}
	#contextMenu{position:absolute;z-index:999;display:none;}
	#contextMenu dd a{padding: 0 20px;}
	#contextMenu dd:hover {
	    background-color: #f2f2f2;
	    color: #000;
	}
	.runtest textarea {
		    display: block;
		    width: 600px;
		    height: 350px;
		    border: 10px solid #F8F8F8;
		    border-top-width: 0;
		    padding: 10px;
		    line-height: 20px;
		    overflow: auto;
		    background-color: #3F3F3F;
		    color: #eee;
		    font-size: 12px;
		    font-family: Courier New;
		}
</style>
<div class="layui-tab layui-tab-brief">
	<ul class="layui-tab-title">
		<li class=""><a href="__APP__/Build/edit/id/{$Request.param.id}.html">自定义表单</a></li>
		<li class="layui-this"><a href="javascript:;">编辑表单</a></li>
		<div class="tool-btns">
			<button id="BTN_SAVE" class="layui-btn layui-btn-sm">保存</button>
			<button id="BTN_SAVERUN" class="layui-btn layui-btn-primary layui-btn-sm">保存并启用</button>
			<button id="BTN_VIEWJSON" class="layui-btn layui-btn-primary layui-btn-sm">显示JSON</button>
			<a href="javascript:location.reload();" title="刷新当前页面" class="aicon ai-shuaxin2 font18"></a>
			<a href="javascript:;" class="aicon ai-quanping1 font18" id="fullscreen-btn" title="打开/关闭全屏"></a>
		</div>
	</ul>
	<div class="layui-tab-content page-tab-content flows" id="formdefind">
		<div class="container">
			<div class="main">
				<div class="flow">
					<div id="myPalette"></div>
					<div class="flowNav">
						<div class="nav-title">导航器</div>
						<div id="myOverviewDiv"></div>
					</div>
					<div id="myDiagram"></div>
				</div>
			</div>
			<div class="attrs">
				<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
					<ul class="layui-tab-title">
						<li class="layui-this nodetab">节点属性</li>
						<li class="flowtab">流程属性</li>
					</ul>
					<form class="layui-tab-content layui-form" autocomplete="on">
						<div class="layui-tab-item layui-show" id="myInspectorDiv">
							<div class="layui-form-item">
								<label class="layui-form-label">节点名称</label>
								<div class="layui-input-block">
									<input type="text" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">负责人</label>
								<div class="layui-input-block">
									<textarea type="text" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-textarea"></textarea>
								</div>
							</div>
							<div class="layui-form-item">
								<input type="checkbox" name="" title="启用抄送" lay-skin="primary" checked>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">字段权限</label>
								<div class="layui-input-block">
									<table class="layui-table" lay-size="sm" style="margin:0;">
										<colgroup>
										<col>
										<col width="50">
										<col width="50">
										<col width="50">
										</colgroup>
										<thead>
											<tr>
												<th></th>
												<th>简报</th>
												<th>可写</th>
												<th>简报</th>
											</tr> 
										</thead>
										<tbody>
											<tr>
												<td>asdasfasgfsa</td>
												<td><input type="checkbox" name="" title="" lay-skin="primary" checked></td>
												<td><input type="checkbox" name="" title="" lay-skin="primary" checked></td>
												<td><input type="checkbox" name="" title="" lay-skin="primary" checked></td>
											</tr>
										</tbody>
									</table>	
								</div>
							</div>
						</div>
						<div class="layui-tab-item">
							<div class="layui-form-item">
								<input type="checkbox" name="" title="使用钉钉提醒节点负责人、抄送人" lay-skin="primary" checked>
							</div>
							<div class="layui-form-item">
								<input type="checkbox" name="" title="流程发起后允许撤回" lay-skin="primary" checked>
							</div>
							<div class="layui-form-item">
								<input type="checkbox" name="" title="允许查看流程日志和流转状态" lay-skin="primary" checked>
							</div>
							<button class="layui-btn layui-btn-danger" style="wdith:100%;">关闭流程</button>
						</div>
					</form>
				</div>    
			</div>
		</div>
		<div id="dialog_div"></div>
		<div id="dialog_node"></div>
	</div>
</div>
<div id="contextMenu" style="">
	<ul class="layui-nav-child" lay-filter="test" style="display: block;position: static;">
		  <dd id="cm_undo" onclick="cxcommand(event)"><a href="#" target="_self">撤销(Ctrl+Z)</a></dd>
		  <dd id="cm_redo" onclick="cxcommand(event)"><a href="#" target="_self">重做(Ctrl+Y)</a></dd>
		  <dd id="cm_cut" onclick="cxcommand(event)"><a href="#" target="_self">剪切(Ctrl+X)</a></dd>
		  <dd id="cm_copy" onclick="cxcommand(event)"><a href="#" target="_self">复制(Ctrl+C)</a></dd>
		  <dd id="cm_paste" onclick="cxcommand(event)"><a href="#" target="_self">粘贴(Ctrl+V)</a></dd>
		  <dd id="cm_delete" onclick="cxcommand(event)"><a href="#" target="_self">删除(Delete)</a></dd>
	</ul>
</div>
<script type="text/html" id="Editvo">
	{Data:article name="Build" id="request" var="vo"}
	{$vo|json_encode|raw}
</script>
<script type="text/html" id="AttrTpl">
	{{# layui.each(d.list, function(index, field){ }}
		<div class="layui-form-item">
			<label class="layui-form-label">{{ field.title }}</label>
			<div class="layui-input-block">
				{{# switch(field.type){ 
					case 'textarea': }}
						<textarea type="text" name="{{ index }}" placeholder="请输入{{ field.title }}" autocomplete="off" class="layui-textarea">{{ field.value }}</textarea>
					{{#   break;
					case 'fields':}}
						<table class="layui-table" lay-size="sm" style="margin:0;">
							<colgroup>
								<col>
								<col width="50">
								<col width="50">
								<col width="50">
							</colgroup>
							<thead>
								<tr>
									<th></th>
									<th>可见</th>
									<th>可写</th>
									<th>简报</th>
								</tr> 
							</thead>
							<tbody>
								{{# layui.each(window.Fields, function(k, v){ }}
								<tr>
									<td>{{ v.title }}</td>
									<td><input type="checkbox" name="{{ v.name }}[show]" title="" lay-skin="primary" checked></td>
									<td><input type="checkbox" name="{{ v.name }}[write]" title="" lay-skin="primary"></td>
									<td><input type="checkbox" name="{{ v.name }}[abs]" title="" lay-skin="primary"></td>
								</tr>									
								{{#  }); }}
							</tbody>
						</table>
					{{#   break;
					default:}}
					    <input type="text" name="{{ index }}" placeholder="请输入{{ field.title }}" autocomplete="off" class="layui-input" value="{{ field.value }}" />
				{{# } }}
			</div>
		</div>
	{{#  }); }}
</script>
<!--
	{"class": "go.GraphLinksModel",
		"linkFromPortIdProperty": "fromPort",
		"linkToPortIdProperty": "toPort",
		"nodeDataArray": [
			{"key":"1", "id":"1", "text":"开始", "category":"start", "loc":"-4 -105"},
			{"key":"4", "id":"4", "text":"结束", "category":"end", "loc":"-4 129"}
		],
		"linkDataArray": [ 
			{"from":"1", "to":"4", "fromPort":"B", "toPort":"T", "points":[-4,-85,-4,-75,-4,12.5,-4,12.5,-4,100,-4,110]}
		]
	}
-->

<script src="__PUBLIC__/js/flow/go.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/flow/DataInspector.js" type="text/javascript"></script>
<script type="text/javascript">
	layui.use(['workflow','form','element','jquery'], function(){
	  	var form = layui.form,
	  		element = layui.element,
			$ = layui.jquery,
			jQuery = $,
			flow = layui.workflow;
		window.$=window.jQuery = $;
		$.getScript('__PUBLIC__/js/flow/jquery-ui-1.9.0.custom.js', function(data, textStatus) {
			window.vo = $.parseJSON($('#Editvo').html());
			flow.init(vo.flows);
		});
	});
</script>