<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>{:Config('site.title')}</title>
    <link rel="stylesheet" href="__STATIC__/layui/css/layui.css">
    <link rel="stylesheet" href="__PUBLIC__/css/new.css">
    <script src="__STATIC__/layui/layui.js"></script>
</head>
<body>
    <header class="layui-header header-doc" summer>
        <div class="layui-container layui-hide-md">
            <div class="header">
                <button class="navbar-toggle hamburger hamburger-close collapsed" id="ToggleSideMenu" type="button" aria-expanded="false">
                    <span class="sr-only"></span>
                    <span class="hamburger-bar"></span>
                </button>
                <h1>{:Config('site.name')}</h1>
            </div>
        </div>
        <div class="layui-container layui-hide-xs">
            <a class="logo" href="/">
                <img src="/static/logo.svg" alt="layui">
            </a>
            <ul class="layui-nav">
                <li class="layui-nav-item {eq name=":Request()->controller()" value="Article"}layui-this{/eq}">
                    <a href="/Article.html">小说</a>
                    <dl class="layui-nav-child">
                        {Data:loop name="Category" module="Article" limit="all" var="var" order="id desc"}
                        <dd><a href="/Article/Category/{$var.id}.html" pjax>{$var.title}</a></dd>
                        {/Data:loop}
                    </dl>
                </li>
                <li class="layui-nav-item {eq name=":Request()->controller()" value="Video"}layui-this{/eq}">
                    <a href="/Video.html">视频</a>
                    <dl class="layui-nav-child">
                        {Data:loop name="Category" module="Video" limit="all" var="var" order="id desc"}
                        <dd><a href="/Video/Category/{$var.id}.html" pjax>{$var.title}</a></dd>
                        {/Data:loop}
                    </dl>
                </li>
                <li class="layui-nav-item {eq name=":Request()->controller()" value="Image"}layui-this{/eq}"><a href="/Image.html">图片</a></li>   
                <li class="layui-nav-item {eq name=":Request()->controller()" value="Image"}layui-this{/eq}"><a href="/vip.html"><i class="layui-icon layui-icon-friends"></i>VIP</a></li>           
            </ul>
            <form class="layui-form search-form" action="/Search.html">
                <input type="text" name="keywords" class="layui-input">
                <button class="layui-btn" type="submit"><i class="layui-icon layui-icon-search"></i></button>
            </form>
            <div class="userinfo">
            {gt name=":Session(Config('USER_AUTH_KEY'))" value="0"}
                    <a href="/User.html"><img src="//t.cn/RCzsdCq" class="layui-nav-img">{:Session('nickname')}</a>
                    <dl class="layui-nav-child">
                        <dd><a href="/post.html">投稿</a></dd>
                        <dd><a href="/User/profile.html">修改信息</a></dd>
                        <dd><a href="/User/changepwd.html">安全管理</a></dd>
                        <dd><a ajax data-href="/User/logout.html">退出</a></dd>
                    </dl>
            {else /}
                <a href="/Reg.html">注册</a> | <a href="/Login.html">登陆</a>
            {/gt}
            </div>
        </div>
    </header>
    <section class="body">
        <ul class="layui-nav layui-nav-tree" id="SideMenu" lay-filter="menu" style="display:none;">
            <li class="layui-nav-item {eq name=":Request()->controller()" value="Article"}layui-this{/eq}"><a href="/Article.html">小说</a></li>
            <li class="layui-nav-item {eq name=":Request()->controller()" value="Video"}layui-this{/eq}"><a href="/Video.html">视频</a></li>
            <li class="layui-nav-item {eq name=":Request()->controller()" value="Image"}layui-this{/eq}"><a href="/Image.html">图片</a></li>
        </ul>
        <div class="layui-container">
            {__CONTENT__}
        </div>
    </section>
    <div class="layui-clear">&nbsp;</div>
    <footer class="page footer">
        <div class="layui-container">
            <span>© 2019 <a href="/">layui.com</a> </span>
            <span>
                <a href="" target="_blank">案例</a>
                <a href="" target="_blank">支持</a>
                <a href="" target="_blank">公众号</a>
            </span>
        </div>
    </footer>
    <!-- 你的HTML代码 -->

    <script>
      //一般直接写在一个js文件中
        layui.use(['layer', 'form', 'util', 'element','jquery'], function () {
            var layer = layui.layer,
                form = layui.form,
                $ = layui.jquery,
                util = layui.util;
            $('#ToggleSideMenu').on('click',function(){
                $(this).toggleClass('collapsed');
                $('#SideMenu').toggle();
            });
            //执行
            util.fixbar();
            $('header .search-form').on('mouseenter',function(){
                $(this).addClass('hover');
            }).on('mouseleave',function(){
                $(this).removeClass('hover');
            })
            $('[ajax]').on('click',function () {
                $.getJSON($(this).attr('data-href'),function(d){
                    layer.msg(d.msg,{icon:d.code},function () {
                        if(d.url) window.location=d.url;
                    });
                });
            })
        });
    </script>
</body>

</html>